
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Test Driven Domination</title>
    <meta name="author" content="Joe Leo">
    
	<meta name="description" content="Published on: Aug 2nd, 2013 Tags: I&#8217;m big on mocking. I create loads of interfaces and I test up against my interfaces. That&#8217;s how I &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Test Driven Domination" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='http://fonts.googleapis.com/css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Amethysta' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <script src="/javascripts/ajaxify.js"></script>
   
    
</head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<ul>
  <li>
    <h1 class="animated bounceInDown">
      <div id="headerbg">
      <img src="http://www.gravatar.com/avatar/6995c75aacde26e783f05dd0283644ff" alt="Gravatar of Joe Leo " title="Gravatar of Joe Leo" /> Test Driven Domination
      </div>
    </h1>
  </li>
  <li>
    <h1 class="animated bounceInDown">
    </h1>
  </li>
</ul>

<ul id="social-links" style="text-align:center">
  
  <!-- GitHub -->
  <li>
  <a href="https://github.com/jleo3" class="github" title="Github"></a>
  </li>
  
  
  
  
  <!-- Twitter -->
  <li>
  <a href="http://www.twitter.com/jleo3" class="twitter" title="Twitter"></a>
  </li>
  
  
  <!-- LinkedIn -->
  <li>
  <a href="http://www.linkedin.com/in/jleo3" class="linkedin" title="LinkedIn"></a>
  </li>
  
  
  
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/blog/archives/index.html">Archives</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    
    <li>
    <div id="dark">
        <form method="get" action="/search.html" id="search">
            <input name="query" type="text" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>

<div id="toload">
<!-- begin toload --> 
    <div id="content" class="inner">
        


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/08/02/use-automocking-to-mop-up-your-specs/">
		
			Use Automocking to Mop Up Your Specs</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: 








  


<time datetime="2013-08-02T15:17:00-04:00" pubdate data-updated="true">Aug 2<span>nd</span>, 2013</time></div>
      <div class="tags">Tags: 

</div>
    </div>
		<p>I&#8217;m big on mocking. I create loads of interfaces and I test up against my interfaces. That&#8217;s how I define unit tests. I understand there are plenty of other definitions out there, and many of them have merit. This one helps me to stay organized.</p>

<p>This also leads to loads of setup in my MSpec files:</p>

<div><script src='https://gist.github.com/6169321.js'></script>
<noscript><pre><code></code></pre></noscript></div>


<p>This class is my setup. My other specs extend this class, reducing some of the noise:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[Subject("CurrentScenario")]
</span><span class='line'>internal class when_setting_current_scenario : ScenarioWindowViewModelSpecs
</span><span class='line'>{
</span><span class='line'>    const string CurrentScenario = "current scenario";
</span><span class='line'>
</span><span class='line'>    Because of = () =&gt; ScenarioWindowViewModel.CurrentScenario = CurrentScenario;
</span><span class='line'>
</span><span class='line'>    It will_set_the_current_scenario = () =&gt; 
</span><span class='line'>        ScenarioWindowViewModel.CurrentScenario.ShouldContain(CurrentScenario);
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>So, nightmare setup but a pretty concise spec. The problem is compounded, of course, anytime I add, remove, or change my dependencies. I always have to change them in both production and test code.</p>

<p>Now enter automocking, an intelligent mix of unit testing and dependency injection. Using MSpec&#8217;s automocking capabilities, we declare our Subject Under Test (SUT) and get right to business:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
</pre></td><td class='code'><pre><code class=''><span class='line'>[Subject("CurrentScenario")]
</span><span class='line'>internal class when_getting_setting : WithSubject&lt;ScenarioWindowViewModel&gt;
</span><span class='line'>{
</span><span class='line'>    private const string CurrentScenario = "current scenario";
</span><span class='line'>
</span><span class='line'>    private Because of = () =&gt; Subject.CurrentScenario = CurrentScenario;
</span><span class='line'>
</span><span class='line'>    private It will_set_the_current_scenario = () =&gt; 
</span><span class='line'>        Subject.CurrentScenario.ShouldContain(CurrentScenario);
</span><span class='line'>}</span></code></pre></td></tr></table></div></figure>


<p>Where did the setup go? Using this method, it&#8217;s all done for us. MSpec knows from the class declaration that ScenarioWindowViewModel is our SUT and that there are four interface dependencies. So we don&#8217;t need to go through the trouble of declaring and intitializing each one.</p>

<p>We don&#8217;t even have to decare our SUT. We use the <code>subject</code> keyword in place of ScenarioWindowViewModel.</p>

<p>This helps tremendously with reducing setup and headaches as a result of churn in the production code. It even provides a nicer syntax for when we need those dependencies. For example, our SUT has a dependency on an IGridSettingsViewModel. Here&#8217;s how to set an expectation:</p>

<figure class='code'><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
</pre></td><td class='code'><pre><code class=''><span class='line'> It will_register_a_column_manager = () =&gt; The&lt;IGridSettingsViewModel&gt;.WasToldTo(
</span><span class='line'>            x =&gt; x.SetColumnStyleManager(Arg&lt;IColumnStyleManager&gt;.Is.Anything));</span></code></pre></td></tr></table></div></figure>


<p>Nice and easy, and much cleaner.</p>

		
		
	</div>

<div class="meta">
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/08/01/retrofitting-mvvm-moving-out/">
		
			Retrofitting MVVM: Moving Out</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: 








  


<time datetime="2013-08-01T08:49:00-04:00" pubdate data-updated="true">Aug 1<span>st</span>, 2013</time></div>
      <div class="tags">Tags: 

</div>
    </div>
		<p>Last week I discovered that I&#8217;ve been lying to myself. I told myself for almost a year that I was making my application conform to the MVVM framework. I was not. Not by a wide margin. I suspected this, then had <a href="http://stackoverflow.com/questions/17845668/how-do-i-reduce-dependencies-in-my-bloated-wpf-mainwindow">StackOverflow confirm it</a>.</p>

<p>After dusting myself off, I decided change was needed. It&#8217;s one thing to decide against using an MVVM framework, a decision my team made a long time before things got so big and complicated.(My friend and former colleague, Moss Collum, had the best words of wisdom for me when I lamented my architectural state on Twitter:
@jleo3:
@moss:</p>

<p>)</p>

<p> But in our case we&#8217;ve transgressed against known effective patterns of .NET development. Reparations must be made. So I started looking into ways to change. I watched an excellent talk by Rob Eisenberg called <a href="http://channel9.msdn.com/events/MIX/MIX10/EX15">&#8220;Build Your Own MVVM Framework&#8221;</a>. I read, and I experimented. Then I came up with a plan.</p>

<p> The first problem comes with our windows. We have three types of windows that the user can load, each with its own nested WinForms grid. One of the views is a &#8220;master&#8221; view. The other two views can be launched from the master view. One is a detail view and the other is a scenario view. We use AutoFac for dependency injection, but we overloaded our code-behinds with dependencies - mostly ViewModels - instead of using one ViewModel to rule them all.</p>

<p> I know that a code-behind with lots of dependencies and logic is probably the most egregious of our sins. I also know that moving away from this will give us two advantages: first, it will allow us to have a proper ViewModel per view which can control everything. This sets us up for MVVM retrofitting. Second, extracting this mess by hand will help me to see the common functionality being duplicated across my three windows.</p>

		
		
	</div>

<div class="meta">
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2013/04/02/ken-schwaber-at-philly-ete/">
		
			More Than Skim Milk Agile</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: 








  


<time datetime="2013-04-02T16:29:00-04:00" pubdate data-updated="true">Apr 2<span>nd</span>, 2013</time></div>
      <div class="tags">Tags: 

</div>
    </div>
		<p><em>I&#8217;m writing a little about my experiences at <a href="http://phillyemergingtech.com">Philly ETE 2013</a>. This is a great conference where people can get a little taste of everything development related.</em></p>

<h3>The Path to Agility - Ken Schwaber</h3>

<p>The goal of this talk is to get us on the path to agility. I&#8217;m here because I&#8217;m interested in getting my team more agile.  We&#8217;re <a href="http://www.nbcnews.com/video/nbc-news/51351332#51351332">&#8220;skim milk&#8221; agile</a> right now. I came to this talk believing our agility is a subjectively measured goal. Ken has a different take.</p>

<p>First, a little background on Agile. XP started becoming dominant in 1998, Agile Manifesto 2001. Scrum has been around 25 years! And an endorsement for XP: &#8220;If you&#8217;re not using XP you have to come up with something <strong>like</strong> XP.&#8221; Ken is happy with the state of Agile and is concerned about its future. In short, it can&#8217;t become a passing craze.</p>

<p>One definition of Agile is &#8220;to take control of opportunities and respond to challenges while controlling risk.&#8221; I wonder how much we pay attention to our risk? What are the risks we face, and how do ideas like introducing Scala impact that factor?</p>

<p>One observation, from Harvard Business Review, is that changing an organization to follow Agile has about a 30% success rate and can take up to 7 years. Ken says that he&#8217;s observed companies get to a highly successful Agile state in two or three years and has subsequently seen them revert back to old practices. Why does this happen?</p>

<p>This talk is making me wonder just how agile my team is. In what areas can we be better? We&#8217;re going to start addressing planning and info radiators soon. Is this the best place to start? I&#8217;m not sure. I think the most important thing, right now, is to start somewhere.</p>

<p>We&#8217;re now talking about TDD, BDD, tech debt. OK, but when are we getting to the Path? Ken&#8217;s suggestion is to measure your agility using any or all of these.</p>

<ul>
<li>total defects</li>
<li>time to get a small change to a customer</li>
<li>stabilization time for releases</li>
<li>frequency of releases</li>
</ul>


<p>These are just a few that he mentioned, the most relevant for my team (and for my role, as I don&#8217;t have access to the budget). I&#8217;d like to know how to measure these. Total defects is easy. I&#8217;m happy to say that&#8217;s not a high number but it could always be improved. &#8220;Small change&#8221; is a slippery term, and it will vary from code base to code base.</p>

<p>But we release every week on a schedule and the time to stabilize a release is measured in minutes, not months. So we&#8217;re good, right? Not so much. There&#8217;s much more to be done and improved upon. We&#8217;re &#8220;skim milk&#8221; Agile, and I&#8217;m left wanting. Although this talk did not convince me of a definite path forward, it has impressed upon me the need to measure something and improve an objective metric.</p>

		
		
	</div>

<div class="meta">
	
</div>
</article>

<nav id="pagenavi">
    
    
        <a href="/blog/page/2/" class="next">Next</a>
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav>

    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2013

    Joe Leo
. Powered by <a href="http://octopress.org">Octopress</a> | 
    Theme <a href="http://github.com/panks/fabric">fabric</a> by <a href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->








<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
</body>
</html>
