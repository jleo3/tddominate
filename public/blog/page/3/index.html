
<!DOCTYPE HTML>
<html>
<head>
	<meta charset="utf-8">
	<title>Test Driven Domination</title>
    <meta name="author" content="Joe Leo">
    
	<meta name="description" content="Published on: Dec 6th, 2012 Tags: I&#8217;m working on a .NET project and have been building an Unhandled Exception Manager in the spirit of Jeff &hellip;">
	
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">

	<link href="/atom.xml" rel="alternate" title="Test Driven Domination" type="application/atom+xml">
	<link rel="canonical" href="">
	<link href="/favicon.ico" rel="shortcut icon">
    <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">

    <link href='http://fonts.googleapis.com/css?family=Slackey' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Fjalla+One' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Amethysta' rel='stylesheet' type='text/css'>
	<script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.2/jquery.min.js"></script>
    <!--[if lt IE 9]><script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script><![endif]-->

    <script type="text/javascript" src="/javascripts/jquery-tapir.js"></script>

    <!-- remove or comment it to disable ajaxification -->   
    <script src="/javascripts/ajaxify.js"></script>
   
    
</head>


<body>
    <div id="wrapper">
    <header id="header" class="inner"><!-- for more effects see _animate.scss -->
<ul>
  <li>
    <h1 class="animated bounceInDown">
      <div id="headerbg">
      <img src="http://www.gravatar.com/avatar/6995c75aacde26e783f05dd0283644ff" alt="Gravatar of Joe Leo " title="Gravatar of Joe Leo" /> Test Driven Domination
      </div>
    </h1>
  </li>
  <li>
    <h1 class="animated bounceInDown">
    </h1>
  </li>
</ul>

<ul id="social-links" style="text-align:center">
  
  <!-- GitHub -->
  <li>
  <a href="https://github.com/jleo3" class="github" title="Github"></a>
  </li>
  
  
  
  
  <!-- Twitter -->
  <li>
  <a href="http://www.twitter.com/jleo3" class="twitter" title="Twitter"></a>
  </li>
  
  
  <!-- LinkedIn -->
  <li>
  <a href="http://www.linkedin.com/in/jleo3" class="linkedin" title="LinkedIn"></a>
  </li>
  
  
  
  
</ul>


<!-- use full url including 'index.html' for navigation bar if you are using ajax -->
<ul id="nav">
	<li id="ajax"><a href="/index.html">Home</a></li>
	<li id="ajax"><a href="/blog/archives/index.html">Archives</a></li>
    <li><a href="/atom.xml">RSS</a></li>
    
    <li>
    <div id="dark">
        <form method="get" action="/search.html" id="search">
            <input name="query" type="text" placeholder="Search..." x-webkit-speech />
        </form>
    </div>
    </li>
        
</ul>




</header>

<div id="toload">
<!-- begin toload --> 
    <div id="content" class="inner">
        


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2012/12/06/exceptionally-lazy/">
		
			Exceptionally Lazy</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: 








  


<time datetime="2012-12-06T00:00:00-05:00" pubdate data-updated="true">Dec 6<span>th</span>, 2012</time></div>
      <div class="tags">Tags: 

</div>
    </div>
		<div class='post'>
<head><link href="csharp.css" rel="stylesheet" type="text/css"></link></head>I&#8217;m working on a .NET project and have been building an Unhandled Exception Manager in the <a href="http://www.codeproject.com/Articles/7482/User-Friendly-Exception-Handling" target="_blank">spirit of Jeff Atwood&#8217;s friendly exception handling</a>. If a user encounters an error that will crash our application, the Unhandled Exception Manager steps in first and issues a friendly message. In the background it emails the development team about the exception in as much detail as it can possibly grab.<br /><br />Recently some unwanted functionality gave me the opportunity to learn about lazy evaluation in C#. Look at the following code:<br /><!-- code formatted by http://manoli.net/csharpformat/ --><pre class="csharpcode"><span class="kwrd">return</span> MultiLine(<br /><span class="str">    "Date and Time:         "</span> + DateTime.Now,<br /><span class="str">    "Machine Name:          "</span> + Environment.MachineName,<br /><span class="str">    "IP Address:            "</span> + Dns.GetHostEntry(Dns.GetHostName()).AddressList[0],<br /><span class="str">    "Application Domain:    "</span> + AppDomain.CurrentDomain.FriendlyName,<br />    <span class="str">"Assembly Codebase:     "</span> + _assemblyInfo.CodeBase,<br />    <span class="str">"Assembly Full Name:    "</span> + _assemblyInfo.FullName,<br />    <span class="str">"Assembly Version:      "</span> + _assemblyInfo.Version,<br />    EnhancedStackTrace(<span class="kwrd">new</span> StackTrace(<span class="kwrd">true</span>))<br /> );</pre><br />Multiline simply aggregates the lines so that I can print pretty messages both in the code and in my emails:<br /><br /><!-- code formatted by http://manoli.net/csharpformat/ --><pre class="csharpcode"><span class="kwrd">static</span> <span class="kwrd">string</span> MultiLine(<span class="kwrd">params</span> <span class="kwrd">string</span>[] args)<br />{<br /><span class="kwrd">    return</span> <span class="kwrd">string</span>.Join(Environment.NewLine, args);<br />}</pre><br />If any one of these nested calls throws an exception, we get an <b>unhandled exception</b> in the <b>unhandled exception manager</b>. Not good. Wrapping the whole thing in a <span style="font-family: Courier New, Courier, monospace;">try/catch</span> prevents this but will not give us the maximum amount of information. If <span style="font-family: Courier New, Courier, monospace;">Dns.GetHostName</span> returns null, for example, it would still be nice to get the <span style="font-family: Courier New, Courier, monospace;">MachineName </span>and assembly information. The following MSpec test illustrates the problem:<br /><br /><!-- code formatted by http://manoli.net/csharpformat/ --> <br /><pre class="csharpcode">[Subject(<span class="kwrd">typeof</span> (ExceptionMessageBuilder), <span class="str">"SystemInfo"</span>)]<br /><span class="kwrd">class</span> when_an_exception_is_thrown : ExceptionMessageBuilderSpec<br />{<br /><span class="kwrd">    private</span> <span class="kwrd">static</span> Exception Exception;<br />    <span class="kwrd">private</span> <span class="kwrd">static</span> Version Version;<br /><br />    <span class="kwrd">private</span> Establish context = () =&gt;<br />        {<br />            Exception = <span class="kwrd">new</span> Exception();<br />            Version = <span class="kwrd">new</span> Version(1, 0, 0, 254);<br />            AssemblyInfo.WhenToldTo(x =&gt; x.FullName).Throw(Exception);<br />            AssemblyInfo.WhenToldTo(x =&gt; x.Version).Return(Version);<br />        };<br /><br />    <span class="kwrd">private</span> It will_handle_the_exception = () =&gt; ExceptionMessageBuilder.SystemInfo();<br />}</pre><br />I was able to make this test pass and extract the maximum amount of information about my application crash using lazy evaluation:<br /><br /><!-- code formatted by http://manoli.net/csharpformat/ --> <br /><pre class="csharpcode"><span class="kwrd">public</span> <span class="kwrd">string</span> SystemInfo()<br />{<br /><span class="kwrd">    return</span> MultiLazy(<span class="kwrd">new</span> List&lt;Lazy&lt;<span class="kwrd">string</span>&gt;&gt;<br />        {<span class="kwrd">new</span> Lazy&lt;<span class="kwrd">string</span>&gt;(() =&gt; <span class="str">"Date and Time:         "</span> + AppDomain.CurrentDomain.FriendlyName),<br />         <span class="kwrd">new</span> Lazy&lt;<span class="kwrd">string</span>&gt;(() =&gt; <span class="str">"Machine Name:          "</span> + Environment.MachineName),<br />         <span class="kwrd">new</span> Lazy&lt;<span class="kwrd">string</span>&gt;(() =&gt; <span class="str">"IP Address:            "</span> + Dns.GetHostEntry(Dns.GetHostName()).AddressList[0]),<br />         <span class="kwrd">new</span> Lazy&lt;<span class="kwrd">string</span>&gt;(() =&gt; <span class="str">"Application Domain:    "</span> + AppDomain.CurrentDomain.FriendlyName),<br />         <span class="kwrd">new</span> Lazy&lt;<span class="kwrd">string</span>&gt;(() =&gt; <span class="str">"Assembly Codebase:     "</span> + _assemblyInfo.CodeBase),<br />         <span class="kwrd">new</span> Lazy&lt;<span class="kwrd">string</span>&gt;(() =&gt; <span class="str">"Assembly Full Name:    "</span> + _assemblyInfo.FullName),<br />         <span class="kwrd">new</span> Lazy&lt;<span class="kwrd">string</span>&gt;(() =&gt; <span class="str">"Assembly Version:      "</span> + _assemblyInfo.Version),<br />         <span class="kwrd">new</span> Lazy&lt;<span class="kwrd">string</span>&gt;(() =&gt; EnhancedStackTrace(<span class="kwrd">new</span> StackTrace(<span class="kwrd">true</span>)))<br />     });<br />}</pre><br />Using the <span style="font-family: Courier New, Courier, monospace;">Lazy&lt;&gt;</span> syntax, I can state my intentions without executing any of the code. Instead, the CLR compiles the code and waits for <span style="font-family: Courier New, Courier, monospace;">.Value</span> to be called on the arguments before executing. &nbsp;A change to our <span style="font-family: Courier New, Courier, monospace;">MultiLine </span>function demonstrates this in action:<br /><br /><!-- code formatted by http://manoli.net/csharpformat/ --> <br /><pre class="csharpcode"><span class="kwrd">static</span> <span class="kwrd">string</span> MultiLazy(List&lt;Lazy&lt;<span class="kwrd">string</span>&gt;&gt; args)<br />{<br /><span class="kwrd">    var</span> stringBuilder = <span class="kwrd">new</span> StringBuilder();<br />    <span class="kwrd">foreach</span> (<span class="kwrd">var</span> arg <span class="kwrd">in</span> args)<br />    {<br />        <span class="kwrd">try</span><br />        {<br />            stringBuilder.Append(arg.Value);<br />        }<br /><span class="rem">// ReSharper disable EmptyGeneralCatchClause -- we want all the information we can get.</span><br />        <span class="kwrd">catch</span> (Exception) {}<br /><span class="rem">// ReSharper restore EmptyGeneralCatchClause</span><br />        }<br />        <span class="kwrd">return</span> stringBuilder.ToString();<br />}</pre><br />Of course, this is my first attempt at lazy evaluation in C# and I&#8217;m open to other methods. Could this be cleaned up? Are there better approaches out there?<br /><br /></div>

		
		
	</div>

<div class="meta">
	
</div>
</article>


    <article class="post">
	<h2 class="title">
		
		<a href="/blog/2012/12/05/remap-resharper-keyboard-shortcuts/">
		
			Remap Resharper Keyboard Shortcuts</a>
	</h2>
    <div class="entry-content">
    <div class="meta">
      <div class="date">Published on: 








  


<time datetime="2012-12-05T00:00:00-05:00" pubdate data-updated="true">Dec 5<span>th</span>, 2012</time></div>
      <div class="tags">Tags: 

</div>
    </div>
		<div class='post'>
<span style="font-family: Arial, Helvetica, sans-serif;">I recently spent 20 minutes figuring this out, so hopefully someone googling will be able to figure it out faster.</span><br /><div><span style="font-family: Arial, Helvetica, sans-serif;"><br /></span></div><div><span style="font-family: Arial, Helvetica, sans-serif;">Using Resharper in Visual Studio 2010, I want to see the implementation of a method way more often than I want to see it&#8217;s definition. </span><span style="font-family: Courier New, Courier, monospace;">Ctrl +B</span><span style="font-family: Arial, Helvetica, sans-serif;"> will take you to the definition, but if you use lots of interfaces this command is less helpful. </span><span style="font-family: Courier New, Courier, monospace;">Ctrl + Shift + Alt + B</span><span style="font-family: Arial, Helvetica, sans-serif;"> will take you to the implementation of that method, where the business logic lives.</span></div><div><span style="font-family: Arial, Helvetica, sans-serif;"><br /></span></div><div><span style="font-family: Arial, Helvetica, sans-serif;">So here&#8217;s how to replace GotoDefinition with GotoImplentation:</span></div><div><span style="font-family: Arial, Helvetica, sans-serif;"><br /></span></div><div class="separator" style="clear: both; text-align: center;"><a href="http://2.bp.blogspot.com/-kSTPtKI5TVs/UL-_7lKZq9I/AAAAAAAAAdY/-rt5dHN-v1w/s1600/goto_declaration.PNG" imageanchor="1" style="margin-left: 1em; margin-right: 1em;"><span style="font-family: Arial, Helvetica, sans-serif;"><img border="0" height="189" src="http://2.bp.blogspot.com/-kSTPtKI5TVs/UL-_7lKZq9I/AAAAAAAAAdY/-rt5dHN-v1w/s320/goto_declaration.PNG" width="320" /></span></a></div><div><span style="font-family: Arial, Helvetica, sans-serif;"><br /></span></div><div><ol><li><span style="font-family: Arial, Helvetica, sans-serif;">Open Tools -&gt; Options -&gt; Environment -&gt; Keyboard.</span></li><li><span style="font-family: Arial, Helvetica, sans-serif;">Under &#8220;Show commands containing:&#8221; type&nbsp;</span><span style="font-family: Courier New, Courier, monospace;">Resharper.Resharper_GotoDefinition</span><span style="font-family: Arial, Helvetica, sans-serif;">. Press the Remove button. Now search for&nbsp;</span><span style="font-family: Courier New, Courier, monospace;">Resharper.Resharper_GotoImplementation</span><span style="font-family: Arial, Helvetica, sans-serif;">&nbsp;and do the same thing.</span></li><li><span style="font-family: Arial, Helvetica, sans-serif;">Under &#8220;Press shortcut keys,&#8221; press </span><span style="font-family: Courier New, Courier, monospace;">Ctrl + B</span><span style="font-family: Arial, Helvetica, sans-serif;">. Press the Assign button.</span></li><li><span style="font-family: Arial, Helvetica, sans-serif;">If you&#8217;d still like a shortcut for GotoDefinition, search again for&nbsp;</span><span style="font-family: Courier New, Courier, monospace;">Resharper.Resharper_GotoDefinition</span><span style="font-family: Arial, Helvetica, sans-serif;">, and follow step 3, this time pressing </span><span style="font-family: Courier New, Courier, monospace;">Ctrl + Shift + Alt + B</span><span style="font-family: Arial, Helvetica, sans-serif;">.</span></li><li><span style="font-family: Arial, Helvetica, sans-serif;">Press OK. You&#8217;re all set.</span></li></ol></div><div><span style="font-family: Arial, Helvetica, sans-serif;">UPDATE: 12/6</span><br /><span style="font-family: Arial, Helvetica, sans-serif;"><br /></span><span style="font-family: Arial, Helvetica, sans-serif;">A friend Andreas had the following to add:</span><br /><br /><br /><div class="MsoNormal"><span lang="EN-GB" style="color: #1f497d; mso-ansi-language: EN-GB;"><span style="font-family: Arial, Helvetica, sans-serif;">Just two comments on the key sequence: We’ve actually got a term here in London for the Ctrl + Shift + Alt, because it’s such a mouthful when you’re trying to communicate it to someone who you’re pairing with. We call it (I kid you not) “banana”, cause, you know, the keys are kinda arranged in that shape. So you do occasionally hear people say things like “Banana – B” when coding. <o:p></o:p></span></span></div><div class="MsoNormal"><br /></div><div class="MsoNormal"><span lang="EN-GB" style="color: #1f497d; mso-ansi-language: EN-GB;"><span style="font-family: Arial, Helvetica, sans-serif;">On the topic of bananas – there’s a surprisingly little known shortcut in Resharper. Banana – A over a variable or parameter lets you trace the value origin or destination. So if you’re trying to find out where a parameter actually gets set (or which possible entry points you need to follow), rather than repeatedly following the chains with Alt+F7s or Ctrl-Bs. If you haven’t used it before give it a spin, makes tracing this stuff a lot less tedious.</span><o:p></o:p></span></div></div></div>

		
		
	</div>

<div class="meta">
	
</div>
</article>

<nav id="pagenavi">
    
        <a href="/blog/page/2/" class="prev">Prev</a>
    
    
    <div class="center"><a href="/blog/archives">Blog Archives</a></div>
</nav>

    </div>
    <footer id="footer">
    <div style="display:inline">
    Copyright &copy; 2013

    Joe Leo
. Powered by <a href="http://octopress.org">Octopress</a> | 
    Theme <a href="http://github.com/panks/fabric">fabric</a> by <a href="http://panks.me">Pankaj Kumar</a>
</div>


    </footer>
    <script src="/javascripts/fabric.js"></script>
<script src="/javascripts/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
(function($){
	$('.fancybox').fancybox();
})(jQuery);
</script> <!-- Delete or comment this line to disable Fancybox -->








<!-- end toload --> 
</div>
</div>
<script src="/javascripts/jquery.ui.totop.js" type="text/javascript"></script>
<script type="text/javascript">
/*<![CDATA[*/
;(function($){$().UItoTop({easingType:'easeOutCirc'});})(jQuery); 
/*]]>*/
</script><!-- remove it to remove the scroll to top button -->
</body>
</html>
